YUI.add("gallery-simple-datatable",function(H){var C=H.Lang,F="asc",G="desc",B="sortKey",E="sortDirection",D="contentBox",A="selectedRow";H.SimpleDatatable=H.Base.create("simple-datatable",H.Widget,[H.WidgetChild],{CONTENT_TEMPLATE:"<table>",className:"",tHead:null,tBody:null,initializer:function(I){this.className=this.getClassName();this.publish("sort",{defaultFn:this._defSortFn});this.publish("rowSelected",{defaultFn:this._defSelectedFn});},renderUI:function(){var I=this.get(D),J=this.get("caption");this.tHead=H.Node.create("<thead></thead>");this.tBody=H.Node.create("<tbody></tbody>");if(J){I.append("<caption>"+J+"</caption>");}I.append(this.tHead).append(this.tBody);},bindUI:function(){var I=this.className+"-over";this.after("sortKeyChange",this._afterSortKeyChange);this.on("sortDirectionChange",this._onSortDirectionChange);this.after("sortDirectionChange",this._afterSortDirectionChange);this.after("selectedRowChange",this._afterSelectedRowChange);this.after("captionChange",this._afterCaptionChange);this.tHead.delegate("click",function(J){this.fire("sort",{headerTarget:J.currentTarget});},"th",this);this.tBody.delegate("mouseenter",function(J){J.currentTarget.addClass(I);},"tr");this.tBody.delegate("mouseleave",function(J){J.currentTarget.removeClass(I);},"tr");this.tBody.delegate("click",function(J){this.fire("rowSelected",{rowTarget:J.currentTarget});},"tr",this);},syncUI:function(){this.setHeaders(this.get("headers"));this.setRows(this.get("rows"));},setHeaders:function(J){var M=H.Node.create("<tr></tr>"),I,L,K=0;if(!J){J={};}if(C.isObject(J)){for(L in J){I=H.Node.create("<th></th>");I.addClass(this.className+"-col-"+(K++));I.addClass(this.className+"-col-"+L);I.append("<div>"+J[L]+'<span class="yui3-icon"></span></div>');I.setAttribute(B,L);M.append(I);}}this.tHead.setContent("");this.tHead.setContent(M);return this;},setRows:function(K){var J,I;this.tBody.setContent("");if(!K){K=[];}for(J=0,I=K.length;J<I;J++){this.addRow(K[J],J);}return this;},addRow:function(N,K){var P=this.get("headers")||{},O,J,L,M=0,I="__yui_id";O=H.Node.create("<tr>");for(L in N){if(L.substring(0,2)==="__"){O.setAttribute(L.substring(2),N[L]);continue;}if(!P[L]){continue;}J=H.Node.create("<td>");J.addClass(this.className+"-col-"+M++);J.addClass(this.className+"-col-"+L);if(N[L]){J.append("<div>"+N[L]+"</div>");}else{J.append("<div>&nbsp;</div>");}O.append(J);}if(!N[I]){N[I]=H.Event.generateId(O);}O.set("id",N[I]);O.addClass(this.className+"-"+((K%2)?"even":"odd"));this.tBody.append(O);return this;},clearHeaders:function(I){if(I===true){this.set("headers",{});}return this.setHeaders();},clearRows:function(I){if(I===true){this.set("rows",[]);}return this.setRows();},toggleSort:function(){this._toggleSort();return this;},sortBy:function(I){this.set(B,I);return this;},sortRowsByKey:function(I){return this.sortBy(I);},_defSortFn:function(J){var I=J.headerTarget.getAttribute(B);if(this.get(B)!==I){this.set(B,I);}else{this._toggleSort();}},_defSelectedFn:function(J){var I=this.get(A);if(I===J.rowTarget){this.set(A,null);}else{this.set(A,J.rowTarget);}},_afterSortKeyChange:function(I){this.set(E,F);},_onSortDirectionChange:function(I){if(I.newVal===I.prevVal){this._updateTable();}},_afterSortDirectionChange:function(I){this._updateTable();},_afterSelectedRowChange:function(I){this._updateSelectedRow(I.newVal,I.prevVal);},_updateTable:function(){var M=this.get("rows"),L=this.get("ascClass"),I=this.get("descClass"),K=this.get(B),J=this.get(E);M.sort(H.bind(this._keySort,this,K,this.get(E)));this.setRows(M);this.set("rows",M);this.tHead.all("."+L).removeClass(L);this.tHead.all("."+I).removeClass(I);this.tHead.all("."+this.className+"-col-"+K).addClass(this.get(J+"Class"));this._updateSelectedRow(this.get(A));},_keySort:function(L,K,J,I){J=J[L];I=I[L];if(H.Lang.isString(J)){J=J.toLowerCase();I=I.toLowerCase();}if(J==I){return 0;}if(J>I){return(K===G)?-1:1;}return(K===F)?-1:1;},_toggleSort:function(){this.set(E,(this.get(E)===F)?G:F);},_updateSelectedRow:function(J,I){var K=this.className+"-selected";if(I){this.tBody.one("#"+I.get("id")).removeClass(K);}if(J){this.tBody.one("#"+J.get("id")).addClass(K);}},_afterCaptionChange:function(J){var I=this.get(D).one("caption");if(I){if(J.newVal){I.set("text",J.newVal);}else{I.remove();}}else{if(J.newVal){this.get(D).prepend("<caption>"+J.newVal+"</caption>");}}}},{ATTRS:{ascClass:{value:"yui3-icon-control-s"},caption:{},descClass:{value:"yui3-icon-control-n"},headers:{value:{},validator:C.isObject},rows:{value:[],validator:C.isArray},selectedRow:{},sortKey:{validator:function(I){return(this.get("headers")[I])?true:false;}},sortDirection:{value:F,setter:function(I){return I===G?G:F;}}}});},"gallery-2010.08.11-20-39",{requires:["node","widget","event","event-mouseenter"]});